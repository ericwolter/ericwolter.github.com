<!doctype html><html lang=en><meta charset=utf-8><meta http-equiv=x-ua-compatible content="ie=edge"><meta name=description content="This site allows you to convert the export.xml from Apple's Health app to an easy to use and universal comma-separated file"><title>Apple Health XML to CSV Converter - ericwolter.com</title><meta name=description content=""><meta name=viewport content="width=device-width,initial-scale=1"><style>/*! normalize.css v8.0.1 | MIT License | github.com/necolas/normalize.css */html{line-height:1.15;-webkit-text-size-adjust:100%}body{margin:0}main{display:block}h1{font-size:2em;margin:.67em 0}hr{box-sizing:content-box;height:0;overflow:visible}pre{font-family:monospace,monospace;font-size:1em}a{background-color:transparent}abbr[title]{border-bottom:none;text-decoration:underline;text-decoration:underline dotted}b,strong{font-weight:bolder}code,kbd,samp{font-family:monospace,monospace;font-size:1em}small{font-size:80%}sub,sup{font-size:75%;line-height:0;position:relative;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}img{border-style:none}button,input,optgroup,select,textarea{font-family:inherit;font-size:100%;line-height:1.15;margin:0}button,input{overflow:visible}button,select{text-transform:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{border-style:none;padding:0}[type=button]:-moz-focusring,[type=reset]:-moz-focusring,[type=submit]:-moz-focusring,button:-moz-focusring{outline:1px dotted ButtonText}fieldset{padding:.35em .75em .625em}legend{box-sizing:border-box;color:inherit;display:table;max-width:100%;padding:0;white-space:normal}progress{vertical-align:baseline}textarea{overflow:auto}[type=checkbox],[type=radio]{box-sizing:border-box;padding:0}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{-webkit-appearance:textfield;outline-offset:-2px}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}details{display:block}summary{display:list-item}template{display:none}[hidden]{display:none}</style><style>html{box-sizing:border-box}*,:after,:before{box-sizing:inherit}@font-face{font-family:icons;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAAAT0AAsAAAAABKgAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABPUy8yAAABCAAAAGAAAABgCGL+9mNtYXAAAAFoAAAAVAAAAFQXVtKHZ2FzcAAAAbwAAAAIAAAACAAAABBnbHlmAAABxAAAAQQAAAEEi1d2U2hlYWQAAALIAAAANgAAADYFdevVaGhlYQAAAwAAAAAkAAAAJANiAeZobXR4AAADJAAAABQAAAAUBIAAAGxvY2EAAAM4AAAADAAAAAwAKACWbWF4cAAAA0QAAAAgAAAAIAAIAEpuYW1lAAADZAAAAW4AAAFu0YJtmXBvc3QAAATUAAAAIAAAACAAAwAAAAMBQAGQAAUAAAFMAWYAAABHAUwBZgAAAPUAGQCEAAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAQAAA6QAB4P/gACAB4AAgAAAAAQAAAAAAAAAAAAAAIAAAAAAAAwAAAAMAAAAcAAEAAwAAABwAAwABAAAAHAAEADgAAAAKAAgAAgACAAEAIOkA//3//wAAAAAAIOkA//3//wAB/+MXBAADAAEAAAAAAAAAAAAAAAEAAf//AA8AAQAAAAAAAAAAAAIAADc5AQAAAAABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAgAA/9UBgAHVACQARwAAJSIGDwERNCYjIgYVEScuASMiBhUUFh8BHgEzMjY/AT4BNTQmIzcjIgYVFBY7AREhETMyNjU0JisBIgYVERQWMyEyNjURNCYjAQkCAwE6BQQEBToBAwIEBQEBSgEDAgIDAUoBAQUEZXcEBQUEd/6kdwQFBQR3BwsLBwFcBwsLB+gCAToBIQQFBQT+3zoBAgYEAQQBSQECAgFJAQQBBAZbBQQEBf63AUkFBAQFCwf+twgLCwgBSQcLAAABAAAAAQAAKfjTT18PPPUACwIAAAAAANJrVZcAAAAA0mtVlwAA/9UBgAHVAAAACAACAAAAAAAAAAEAAAHg/+AAAAIAAAAAAAGAAAEAAAAAAAAAAAAAAAAAAAAFAgAAAAAAAAAAAAAAAQAAAAGAAAAAAAAAAAoAFAAeAIIAAQAAAAUASAACAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAUAAAABAAAAAAACAAcATgABAAAAAAADAAUAMAABAAAAAAAEAAUAYwABAAAAAAAFAAsADwABAAAAAAAGAAUAPwABAAAAAAAKABoAcgADAAEECQABAAoABQADAAEECQACAA4AVQADAAEECQADAAoANQADAAEECQAEAAoAaAADAAEECQAFABYAGgADAAEECQAGAAoARAADAAEECQAKADQAjGljb25zAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGljb25zAGkAYwBvAG4Ac2ljb25zAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmljb25zAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=) format('woff');font-weight:400;font-style:normal}[class*=" icon-"],[class^=icon-]{font-family:icons;speak:none;font-style:normal;font-weight:400;font-variant:normal;text-transform:none;line-height:1;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.icon-download:before{content:"\e900"}#message{display:none;opacity:0;transition:opacity .5s linear;position:fixed;font-family:'Helvetica Neue','Segoe UI',sans-serif;font-weight:300;text-align:center;color:#fff;background:red;font-size:14px;padding:16px;width:100%;z-index:999;background:#ff3b30;background:linear-gradient(180,#ff3b30,#e60200)}#message a{color:#fff;font-size:14px;text-decoration:underline}#message.show{display:block}#message.open{opacity:.9}#content{max-width:960px;width:90%;margin:0 auto;text-align:center;font-size:17px;line-height:21px;font-family:'Helvetica Neue','Segoe UI',sans-serif;font-weight:300}@keyframes beat{0%{transform:scale(1)}50%{transform:scale(1.1)}100%{transform:scale(1)}}#heart{margin-top:45px;width:100px;animation:beat 2s ease 0s infinite normal}h1{margin:45px;font-weight:lighter;font-size:45px;line-height:55px}a{color:#ff2d55;border:0;background:0;width:32px;height:32px;font-size:24px;cursor:pointer}a:hover{color:#f9cfd7}a:active{color:#f9cfd7}#dropzone{position:relative;max-width:600px;margin:0 auto;height:100px;border:2px solid #ff2d55;border-radius:7px;color:#ff2d55;cursor:pointer;font-size:14px;line-height:100px}#disclaimer{font-size:11px;margin:13px -13px;margin-bottom:0;color:#8e8e93}#contact{font-size:11px;margin:13px -13px;margin-top:0;color:#8e8e93;text-decoration:none}#contact a{font-size:11px}table{margin:45px auto;max-width:600px;width:90%;text-align:left;font-size:17px;border-collapse:collapse;table-layout:fixed}tr{border:solid;border-width:1px 0;border-color:#c8c7cc}tr:first-child{border-top:none}tr:last-child{border-bottom:none}td{padding:16px}td:first-child{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}td:last-child{width:50px}#progress{position:absolute;bottom:-1px;height:6px;width:0%;background:#ff2d55;border-bottom-left-radius:5px;border-bottom-right-radius:5px;transition:width .1s}.ad{max-width:600px;margin:0 auto}#technical-details{max-width:600px;margin:0 auto;border-top:1px #c8c7cc solid;font-size:11px;color:#8e8e93;padding-top:11px}#technical-details a{font-size:11px;text-decoration:none}.asterik{font-size:11px;color:#8e8e93;text-decoration:none}</style><script>!function(e,a,t,n,g,c){e.GoogleAnalyticsObject=n,e.ga||(e.ga=function(){(e.ga.q=e.ga.q||[]).push(arguments)}),e.ga.l=+new Date,g=a.createElement(t),c=a.getElementsByTagName(t)[0],g.src="https://www.google-analytics.com/analytics.js",c.parentNode.insertBefore(g,c)}(window,document,"script","ga"),ga("create","UA-42589062-1","auto"),ga("send","pageview")</script><script async src=//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><div id=content role=main><svg id=heart baseProfile=basic xmlns=http://www.w3.org/2000/svg viewBox="0 0 189.9448242 167.9176178"><linearGradient id=a gradientUnits=userSpaceOnUse x1=-308.164 y1=374.749 x2=-308.164 y2=373.749 gradientTransform="matrix(189.94482 0 0 -167.91763 58629.215 62926.957)"><stop offset=0 stop-color=#ee62a3 /><stop offset=1 stop-color=#ed3327 /></linearGradient><path fill=url(#a) d="M95.118 167.918c13.996-.05 94.902-54.59 94.827-112.858-.04-30.516-24.69-55.168-55.056-55.06-15.75.056-29.944 6.76-39.954 17.46C84.896 6.843 70.674.23 54.913.285 24.546.393-.04 25.22 0 55.735c.075 58.27 81.122 112.232 95.118 112.183z"/></svg><h1>Apple Health XML to CSV Converter</h1><div id=dropzone></div><input type=file id=input accept=.xml style=display:none><div id=disclaimer>All work is done locally by your browser. Nothing is uploaded to my server.<a class=asterik href=#details>*</a></div><div id=contact>Feel free to <a href=https://mailhide.io/e/bLVMN onclick='return mailhidepopup=window.open("https://mailhide.io/e/bLVMN","mailhidepopup","width=580,height=635"),!1'>contact me</a> if you have any questions!</div><div class=ad><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-5717136270400903 data-ad-slot=6661853508 data-ad-format=auto></ins></div><script>(adsbygoogle=window.adsbygoogle||[]).push({})</script><table id=results-table><tbody></table><div id=technical-details><a class=asterik name=details>*</a>I am using the <a href="">FileReader API</a> to read the contents of a local file. The XML file is then parsed and converted to CSV files in memory. Finally the CSV can be downloaded using the <a href=https://github.com/eligrey/FileSaver.js>FileSaver.js</a> library by <a href=http://eligrey.com/blog/ >Eli Grey</a>.</div></div><script>!function(e,t){if("function"==typeof define&&define.amd)define([],t);else if("undefined"!=typeof exports)t();else{t(),e.FileSaver={}}}(this,function(){"use strict";var f="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof global&&global.global===global?global:void 0;function d(e,t,o){var n=new XMLHttpRequest;n.open("GET",e),n.responseType="blob",n.onload=function(){a(n.response,t,o)},n.onerror=function(){console.error("could not download file")},n.send()}function r(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch(e){}return 200<=t.status&&t.status<=299}function l(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(e){var o=document.createEvent("MouseEvents");o.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(o)}}var a=f.saveAs||("object"!=typeof window||window!==f?function(){}:"download"in HTMLAnchorElement.prototype?function(e,t,o){var n=f.URL||f.webkitURL,a=document.createElement("a");t=t||e.name||"download",a.download=t,a.rel="noopener","string"==typeof e?(a.href=e,a.origin!==location.origin?r(a.href)?d(e,t,o):l(a,a.target="_blank"):l(a)):(a.href=n.createObjectURL(e),setTimeout(function(){n.revokeObjectURL(a.href)},4e4),setTimeout(function(){l(a)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,o){if(t=t||e.name||"download","string"==typeof e)if(r(e))d(e,t,o);else{var n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){l(n)})}else navigator.msSaveOrOpenBlob((a=e,void 0===(i=o)?i={autoBom:!1}:"object"!=typeof i&&(console.warn("Deprecated: Expected third argument to be a object"),i={autoBom:!i}),i.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(a.type)?new Blob([String.fromCharCode(65279),a],{type:a.type}):a),t);var a,i}:function(e,t,o,n){if((n=n||open("","_blank"))&&(n.document.title=n.document.body.innerText="downloading..."),"string"==typeof e)return d(e,t,o);var a="application/octet-stream"===e.type,i=/constructor/i.test(f.HTMLElement)||f.safari,r=/CriOS\/[\d]+/.test(navigator.userAgent);if((r||a&&i)&&"object"==typeof FileReader){var l=new FileReader;l.onloadend=function(){var e=l.result;e=r?e:e.replace(/^data:[^;]*;/,"data:attachment/file;"),n?n.location.href=e:location=e,n=null},l.readAsDataURL(e)}else{var c=f.URL||f.webkitURL,s=c.createObjectURL(e);n?n.location=s:location.href=s,n=null,setTimeout(function(){c.revokeObjectURL(s)},4e4)}});f.saveAs=a.saveAs=a,"undefined"!=typeof module&&(module.exports=a)})</script><script>"use strict";var current_file,NEWLINE="\n",CSV_SEPARATOR=",",dropzone=document.getElementById("dropzone"),input=document.getElementById("input"),table=document.getElementById("results-table"),parser=new DOMParser,STAGE_START=0,STAGE_READING=1,STAGE_AGGREGATING=2,STAGE_GENERATING=3,STAGE_FINISHED=4,STAGE_TOTAL=3;function setProgress(e,t){var r=t;r*=100,r=Math.round(r),dropzone.textContent=e===STAGE_READING?"Running in circles... ("+r+"%)":e===STAGE_AGGREGATING?"Riding uphill... ("+r+"%)":e===STAGE_GENERATING?"Lifting weights... ("+r+"%)":e===STAGE_FINISHED?"Exhausted, catching a breath! (100%)":"Select your export.xml, ready to go!"}function yieldingLoop(r,n,a,o){var i=0;!function e(){for(var t=Math.min(i+n,r);i<t;)a.call(null,i),i+=1;i<r?setTimeout(e,0):o.call(null)}()}function aggregateData(l,e){var c,u={},d=0,E=l.length;yieldingLoop(l.length,1e3,function(e){var t,r,n,a,o,i,s=l[e];if(void 0!==s.attributes.type)if(t=s.attributes.type.value){for(void 0===u[t]&&(u[t]={columns:[],rows:[]}),n=(r=u[t]).columns,a=r.rows,o={},c=0;c<s.attributes.length;c+=1)i=s.attributes[c],-1===n.indexOf(i.name)&&n.push(i.name),o[i.name]=i.value,-1<i.value.indexOf(",")&&(CSV_SEPARATOR=";");a.push(o)}else console.error("invalid record type");else console.error("no type attribute");setProgress(STAGE_AGGREGATING,(d+=1)/E)},function(){e(null,u)})}function addFileLink(e,t,r){e.addEventListener("click",function(e){saveAs(t,r),e.preventDefault()})}function generateCSV(t,e){var r,n,a,o,i,s,l,c,u,d,E,g,f,A=Object.keys(t),m=0,h=e;l=document.createElement("tbody"),table.replaceChild(l,table.firstElementChild),yieldingLoop(A.length,1,function(e){for(r=A[e],i="",n=t[r],i+=n.columns.join(CSV_SEPARATOR)+NEWLINE,g=0;g<n.rows.length;g+=1){for(o=n.rows[g],f=0;f<n.columns.length;f+=1)a=n.columns[f],void 0!==o[a]&&(i+=o[a]),f+1<n.columns.length&&(i+=CSV_SEPARATOR);i+=NEWLINE,setProgress(STAGE_GENERATING,(m+=1)/h)}s=new Blob([i],{type:"text/csv;charset=utf-8"}),c=document.createElement("tr"),(u=document.createElement("td")).innerHTML=r,c.appendChild(u),d=document.createElement("td"),(E=document.createElement("a")).className+=" icon-download",addFileLink(E,s,r+".csv"),d.appendChild(E),c.appendChild(d),l.appendChild(c)},function(){setProgress(STAGE_FINISHED,1)})}function extractRecords(e,t){for(var r=parser.parseFromString(e,"text/xml").getElementsByTagName("Record"),n=0;n<r.length;n++){var a=r[n],o={attributes:[]};t.push(o);for(var i=0;i<a.attributes.length;i++){var s=a.attributes[i],l={name:s.name.trim(),value:s.value.trim()};o.attributes.push(l),"type"===l.name&&(o.attributes.type=l)}for(var c=a.getElementsByTagName("MetadataEntry"),u=0;u<c.length;u++){var d=c[u];l={name:d.getAttribute("key").trim(),value:d.getAttribute("value").trim()};o.attributes.push(l)}}}function readFileRecordByRecord(u,t){var e=u.size/33554432;e=Math.min(e,33554432);var d=e=Math.max(e,1048576),E=0,r=new FileReader,g=new Uint8Array,f=[];function A(){if(E>=u.size)return setProgress(STAGE_READING,1),void t(null,f);var e=u.slice(E,E+d);r.readAsArrayBuffer(e)}current_file=u,setProgress(STAGE_READING,0),r.onload=function(e){for(var t,r,n,a=(t=g,r=new Uint8Array(e.target.result),(n=new Uint8Array(t.byteLength+r.byteLength)).set(t),n.set(r,t.byteLength),n),o=0,i=0;i<a.length;i++){var s=a[i];if(10===s||13===s){var l=o,c=i;o=i,extractRecords(Utf8ArrayToStr(a.subarray(l,c)),f)}}g=a.subarray(o),setProgress(STAGE_READING,E/u.size),E+=d,A()},r.onerror=function(e){console.log(e,f),t('Error reading file "'+u+'" at offset: '+E)},A()}function Utf8ArrayToStr(e){var t,r,n,a,o,i;for(t="",n=e.length,r=0;r<n;)switch((a=e[r++])>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:t+=String.fromCharCode(a);break;case 12:case 13:o=e[r++],t+=String.fromCharCode((31&a)<<6|63&o);break;case 14:o=e[r++],i=e[r++],t+=String.fromCharCode((15&a)<<12|(63&o)<<6|(63&i)<<0)}return t}setProgress(0,0),dropzone.addEventListener("click",function(e){input.click(),e.preventDefault()},!1),input.addEventListener("change",function(){readFileRecordByRecord(this.files[0],function(e,r){e?console.error(e):aggregateData(r,function(e,t){e?console.error(e):generateCSV(t,r.length)})})},!1)</script>